<!DOCTYPE html>
<html>
<head>
  <title>しらとり</title>
  <style>
    .map-container {
      width: 4cm;
      margin: 0 auto;
      border: 2px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      position: relative;
    }

    .map-container img {
      width: 100%;
      height: auto;
      display: block;
      transition: transform 0.3s ease;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 999;
    }

    .overlay img {
      max-width: 90vw;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 12px;
    }

    .star-image {
      width: 48px;
      height: auto;
      position: absolute;
      transform: translate(-50%, -50%);
      animation: pulse 1.5s infinite;
      z-index: 1000;
      transform-origin: center;
    }

    @keyframes pulse {
      0%   { transform: translate(-50%, -50%) scale(1);   opacity: 1; }
      50%  { transform: translate(-50%, -50%) scale(1.5); opacity: 0.7; }
      100% { transform: translate(-50%, -50%) scale(1);   opacity: 1; }
    }
  </style>

  <script>
    const starPositions = [
      { xPercent: 75, yPercent: 70, url: 'https://www.lixil.co.jp/catalog/' },
      { xPercent: 35, yPercent: 35, url: 'https://www.lixil.co.jp/catalog/' },
      { xPercent: 55, yPercent: 50, url: 'https://www.lixil.co.jp/catalog/' },
      { xPercent: 55, yPercent: 15, url: 'https://abehiroshi.la.coocan.jp/' },
      { xPercent: 45, yPercent: 85, url: 'https://www.nicovideo.jp/' },
    ];

    function showOverlay() {
      const overlay = document.getElementById('overlay');
      overlay.style.display = 'flex';

      const mapImage = document.getElementById('map-image-large');

      if (mapImage.complete) {
        repositionStars();
      } else {
        mapImage.onload = () => {
          repositionStars();
        };
      }
    }

    function hideOverlay() {
      document.getElementById('overlay').style.display = 'none';
      document.querySelectorAll('.star-image').forEach(star => star.remove());
    }

    function repositionStars() {
  const mapImage = document.getElementById('map-image-large');

  // 既存の星を削除
  document.querySelectorAll('.star-image').forEach(star => {
    if (star.parentElement) {
      star.parentElement.remove();
    }
  });

  const wrapper = document.getElementById('map-wrapper');
  const rect = wrapper.getBoundingClientRect();

  starPositions.forEach(pos => {
    const link = document.createElement('a');
    link.href = pos.url;
    link.target = '_blank';

    const star = document.createElement('img');
    star.src = '星印.png';
    star.className = 'star-image';

    const x = rect.left + rect.width * pos.xPercent / 100;
    const y = rect.top + rect.height * pos.yPercent / 100;

    link.style.position = 'fixed';
    link.style.left = `${x}px`;
    link.style.top = `${y}px`;
    link.style.transform = 'translate(-50%, -50%)';
    link.style.zIndex = '1000';

    link.appendChild(star);
    wrapper.appendChild(link);
  });
}

// 画面サイズが変わったときにも再配置
window.addEventListener('resize', () => {
  const overlay = document.getElementById('overlay');
  if (overlay.style.display === 'flex') {
    repositionStars();
  }
});

// 画面の向きが変わったときにも再配置（スマホ・タブレット対応）
window.addEventListener('orientationchange', () => {
  const overlay = document.getElementById('overlay');
  if (overlay.style.display === 'flex') {
    repositionStars();
  }
});
  </script>
</head>

<body>
  <div style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-image: url('仮しらとり.jpg'); background-size: 80vw 100vh; background-repeat: no-repeat; background-position: center; opacity: 0.5; z-index: -1;"></div>

  <a href="https://www.shirotori-garden.jp/">
    <img src="白鳥庭園フォント見出し.png" alt="サンプル画像" style="position: fixed; top: 0; left: 10%; height: auto;">
  </a>

  <div style="margin-top: 90vh; width: 80%; height: 4px; background-color: #003366; margin-left: auto; margin-right: auto; border-radius: 2px;"></div>

  <div class="map-container" onclick="showOverlay()" id="map-container">
    <img src="園内マップ.jpg" alt="園内マップ" id="map-image-small">
  </div>

  <div class="overlay" id="overlay" onclick="hideOverlay()">
   <div id="map-wrapper" style="position: relative;">
    <img src="園内マップ.jpg" alt="拡大園内マップ" id="map-image-large">
   </div>
  </div>
</body>
</html>